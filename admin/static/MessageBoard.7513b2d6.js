import{_ as e,y as a,g as t,o,B as l,N as n,O as r,P as s,Q as i,E as c,b as d,M as p,k as u,f as g,j as m,G as h,c as f,S as _,R as v,T as b,s as w,U as x,V as y}from"./index.094a181c.js";/* empty css                   */import{a as S}from"./api.request.940d4058.js";const P=e=>S.request({url:"/bright/api/removeMessage",data:e,isLoading:!0,method:"post"});const B={class:"header"},j={class:"flex pageFlex"};var k=e({__name:"MessageBoard",setup(e){a();const k=t({tableData:[],colums:[{prop:"name",label:"用户名称",width:100},{prop:"ip_place",label:"ip所属地",width:100},{prop:"time",label:"留言时间",width:180},{prop:"content",label:"留言内容"},{prop:"menu",label:"操作",width:100}],multipleSelection:[],total:0,currentPage:1,pageSize:10}),z=({row:e,column:a,rowIndex:t,columnIndex:o})=>"hiddenActive";o((()=>{C()}));const C=()=>{var e;(e={currentPage:k.currentPage,pageSize:k.pageSize},S.request({url:"/bright/api/getMessageList",data:e,isLoading:!0,method:"post"})).then((e=>{200===(null==e?void 0:e.code)&&(k.tableData=e.data,k.total=e.total)}))},D=e=>{const a=[];e.forEach((e=>{a.push(e._id)})),k.multipleSelection=a},M=()=>{k.multipleSelection.length?x.confirm("您确定要全部删除?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{P(k.multipleSelection).then((e=>{200===(null==e?void 0:e.code)&&(w.success("删除成功"),k.currentPage=1,C())}))})).catch((()=>{})):w.error("请选择数据")},T=e=>{k.currentPage=e,C()};return(e,a)=>{const t=l,o=n,x=r,S=s,q=i,I=c;return d(),p(I,{class:"index-container"},{header:u((()=>[g("div",B,[m(t,{type:"danger",icon:"Delete",onClick:M},{default:u((()=>[h("批量删除")])),_:1})])])),default:u((()=>[m(S,{data:k.tableData,style:{width:"100%"},"cell-class-name":z,onSelectionChange:D},{default:u((()=>[m(o,{type:"selection",width:"50"}),m(o,{type:"index",width:"80",label:"序号"}),(d(!0),f(v,null,_(k.colums,(e=>(d(),p(o,{key:e.prop,prop:e.prop,label:e.label,width:e.width},y({_:2},["menu"===e.prop?{name:"default",fn:u((e=>[m(x,{title:"确定删除吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:a=>{return t=e.row,void P({_id:t._id}).then((e=>{200===(null==e?void 0:e.code)&&(w.success("删除成功"),k.currentPage=1,C())}));var t}},{reference:u((()=>[m(t,{type:"danger",icon:"Delete"},{default:u((()=>[h("删除")])),_:1})])),_:2},1032,["onConfirm"])])),key:"0"}:void 0]),1032,["prop","label","width"])))),128))])),_:1},8,["data"]),g("div",j,[k.total>10?(d(),p(q,{key:0,background:"",layout:"prev, pager, next",total:k.total,"page-size":k.pageSize,"current-page":k.currentPage,onCurrentChange:T},null,8,["total","page-size","current-page"])):b("v-if",!0)])])),_:1})}}},[["__scopeId","data-v-2f0234d9"],["__file","D:/Projects/other_test_projects/blog_admin/src/views/MessageBoard.vue"]]);export{k as default};

var e=Object.defineProperty,l=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.propertyIsEnumerable,r=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,o)=>{for(var u in o||(o={}))l.call(o,u)&&r(e,u,o[u]);if(a)for(var u of a(o))t.call(o,u)&&r(e,u,o[u]);return e};import{_ as u,r as d,g as n,L as i,b as s,M as p,k as c,f as m,j as g,G as b,c as f,S as h,R as v,n as _,s as y,W as w,A as V,z as x,C as k,B as F,X as S,y as C,o as P,N as j,O as q,P as D,Q as U,E as z,T as L,U as O,V as T}from"./index.094a181c.js";/* empty css                   */import{a as A}from"./api.request.940d4058.js";const B="/bright/api",E=e=>A.request({url:`${B}/removeShare`,data:e,isLoading:!0,method:"post"}),R={class:"dialog-footer"};var $=u({__name:"DialogAddContent",props:{type:String,reload:Function},setup(e,{expose:l}){const a=[{label:"工具",value:"tool"},{label:"链接",value:"link"},{label:"插件",value:"plug"}],t=e,r=d(null),u=n({visible:!1,ruleForm:{tag:"",url:"",name:"",describe:"",href:""},rules:{},hiddenRules:{tag:[{required:"true",message:"标签不能为空",trigger:["change"]}],url:[{required:"true",message:"图片不能为空",trigger:["change"]}],name:[{required:"true",message:"名称不能为空",trigger:["change"]}],describe:[{required:"true",message:"描述不能为空",trigger:["change"]}],href:[{required:"true",message:"链接不能为空",trigger:["change"]}]}}),C=()=>{u.visible=!1,u.rules={},u.ruleForm={_id:"",tag:"",url:"",name:"",describe:"",href:""}},P=()=>{r.value.validate((e=>{if(e){let e=o(o({},u.ruleForm),{createdTime:(new Date).toLocaleString()});"add"==t.type?(delete e._id,(l=e,A.request({url:`${B}/addShare`,data:l,isLoading:!0,method:"post"})).then((e=>{200===(null==e?void 0:e.code)&&(y.success("添加成功"),t.reload(),C())}))):(e=>A.request({url:`${B}/updateShare`,data:e,isLoading:!0,method:"post"}))(e).then((e=>{200===(null==e?void 0:e.code)&&(y.success("更新成功"),t.reload(),C())}))}var l}))};return l({open:e=>{_((()=>{u.visible=!0,e&&(u.ruleForm={_id:e._id,tag:e.tag,url:e.url,name:e.name,describe:e.describe,href:e.href}),u.rules=u.hiddenRules}))},close:C}),(l,t)=>{const o=S,d=w,n=V,_=x,y=k,j=F,q=i;return s(),p(q,{title:"add"==e.type?"新增":"修改",modelValue:u.visible,"onUpdate:modelValue":t[6]||(t[6]=e=>u.visible=e),width:"400px","close-on-click-modal":!1,onClose:C},{footer:c((()=>[m("span",R,[g(j,{onClick:t[5]||(t[5]=e=>u.visible=!1)},{default:c((()=>[b("取 消")])),_:1}),g(j,{type:"primary",onClick:P},{default:c((()=>[b("确 定")])),_:1})])])),default:c((()=>[g(y,{model:u.ruleForm,rules:u.rules,"validate-on-rule-change":!1,ref_key:"formRef",ref:r,"label-width":"100px",class:"good-form"},{default:c((()=>[g(n,{label:"标签",prop:"tag","label-width":"55"},{default:c((()=>[g(d,{modelValue:u.ruleForm.tag,"onUpdate:modelValue":t[0]||(t[0]=e=>u.ruleForm.tag=e),placeholder:" ",style:{width:"305px"}},{default:c((()=>[(s(),f(v,null,h(a,(e=>g(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),g(n,{label:"图片",prop:"url","label-width":"55"},{default:c((()=>[g(_,{type:"text",modelValue:u.ruleForm.url,"onUpdate:modelValue":t[1]||(t[1]=e=>u.ruleForm.url=e)},null,8,["modelValue"])])),_:1}),g(n,{label:"名称",prop:"name","label-width":"55"},{default:c((()=>[g(_,{type:"text",min:"0",modelValue:u.ruleForm.name,"onUpdate:modelValue":t[2]||(t[2]=e=>u.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),g(n,{label:"描述",prop:"describe","label-width":"55"},{default:c((()=>[g(_,{type:"text",modelValue:u.ruleForm.describe,"onUpdate:modelValue":t[3]||(t[3]=e=>u.ruleForm.describe=e)},null,8,["modelValue"])])),_:1}),g(n,{label:"链接",prop:"href","label-width":"55"},{default:c((()=>[g(_,{type:"text",modelValue:u.ruleForm.href,"onUpdate:modelValue":t[4]||(t[4]=e=>u.ruleForm.href=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}}},[["__file","D:/Projects/other_test_projects/blog_admin/src/components/DialogAddContent.vue"]]);const I={class:"header"},G={class:"flex pageFlex"};var M=u({__name:"Appliance",setup(e){C();const l=d(null),a=[{label:"工具",value:"01"},{label:"链接",value:"02"},{label:"插件",value:"03"}],t=n({tableData:[],colums:[{prop:"tag",label:"分类",width:80},{prop:"url",label:"图片",width:80},{prop:"name",label:"名称",width:120},{prop:"describe",label:"描述",width:250},{prop:"href",label:"链接"},{prop:"menu",label:"操作",width:200}],multipleSelection:[],total:0,currentPage:1,pageSize:10,type:"add"});P((()=>{r()}));const r=()=>{var e;(e={currentPage:t.currentPage,pageSize:t.pageSize},A.request({url:`${B}/getShareList`,data:e,isLoading:!0,method:"post"})).then((e=>{200===(null==e?void 0:e.code)&&(t.tableData=e.data,t.total=e.total)}))},o=()=>{t.type="add",l.value.open()},u=e=>{const l=[];e.forEach((e=>{l.push(e._id)})),t.multipleSelection=l},i=()=>{t.multipleSelection.length?O.confirm("您确定要全部删除?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{E(t.multipleSelection).then((e=>{200===(null==e?void 0:e.code)&&(y.success("删除成功"),t.currentPage=1,r())}))})).catch((()=>{})):y.error("请选择数据")},_=e=>{t.currentPage=e,r()};return(e,d)=>{const n=F,V=j,x=S,k=w,C=q,P=D,O=U,A=z;return s(),f(v,null,[g(A,{class:"index-container"},{header:c((()=>[m("div",I,[g(n,{type:"primary",icon:"Plus",onClick:o},{default:c((()=>[b("新增分享")])),_:1}),g(n,{type:"danger",icon:"Delete",onClick:i},{default:c((()=>[b("批量删除")])),_:1})])])),default:c((()=>[g(P,{data:t.tableData,style:{width:"100%"},onSelectionChange:u},{default:c((()=>[g(V,{type:"selection",width:"50"}),g(V,{type:"index",width:"80",label:"序号"}),(s(!0),f(v,null,h(t.colums,(e=>(s(),p(V,{key:e.prop,prop:e.prop,label:e.label,width:e.width},T({_:2},["tag"===e.prop?{name:"default",fn:c((e=>[g(k,{modelValue:e.row.tag,"onUpdate:modelValue":l=>e.row.tag=l,disabled:"",class:"disabled_select"},{default:c((()=>[(s(),f(v,null,h(a,(e=>g(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),key:"0"}:void 0,"menu"===e.prop?{name:"default",fn:c((e=>[g(n,{type:"primary",icon:"Edit",onClick:a=>{return r=e.row,t.type="edit",void l.value.open(r);var r}},{default:c((()=>[b("编辑")])),_:2},1032,["onClick"]),g(C,{title:"确定删除吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:l=>{return a=e.row,void E({_id:a._id}).then((e=>{200===(null==e?void 0:e.code)&&(y.success("删除成功"),t.currentPage=1,r())}));var a}},{reference:c((()=>[g(n,{type:"danger",icon:"Delete"},{default:c((()=>[b("删除")])),_:1})])),_:2},1032,["onConfirm"])])),key:"1"}:void 0]),1032,["prop","label","width"])))),128))])),_:1},8,["data"]),m("div",G,[t.total>10?(s(),p(O,{key:0,background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:_},null,8,["total","page-size","current-page"])):L("v-if",!0)])])),_:1}),g($,{ref_key:"addContent",ref:l,reload:r,type:t.type},null,8,["type"])],64)}}},[["__scopeId","data-v-5a72e33a"],["__file","D:/Projects/other_test_projects/blog_admin/src/views/Appliance.vue"]]);export{M as default};
